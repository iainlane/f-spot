# ubuntu_xdg_photo_dir.patch: Patch by Andrew Higginson to set the default import target to
# XDG pictures dir/Photos (as translated). This only affects the first run, existing users
# will see no change
-- f-spot-0.6.0.0.orig/debian/patches/ubuntu_xdg_photo_dir.patch
++ f-spot-0.6.0.0/debian/patches/ubuntu_xdg_photo_dir.patch
@ -0,0 +1,16 @@
Index: f-spot.git/src/Preferences.cs
===================================================================
--- f-spot.git.orig/src/Preferences.cs	2010-05-17 11:59:36.716709144 +0100
+++ f-spot.git/src/Preferences.cs	2010-05-17 16:57:27.086720213 +0100
@@ -148,7 +148,14 @@
 			case SCREENSAVER_DELAY:
 				return 4.0;
 			case STORAGE_PATH:
-				return System.IO.Path.Combine (FSpot.Global.HomeDirectory, Catalog.GetString("Photos"));
+                String default_storage_path = System.IO.Path.Combine (
+                    Environment.GetFolderPath (Environment.SpecialFolder.MyPictures),
+                    Catalog.GetString ("Photos")
+                );
+				if (!System.IO.Directory.Exists (default_storage_path)) {
+					System.IO.Directory.CreateDirectory (default_storage_path);
+				}
+				return default_storage_path;
 			case EXPORT_EMAIL_SIZE:
 				return 3;	// medium size 640px
 			case EXPORT_EMAIL_ROTATE:
