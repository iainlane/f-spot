# ubuntu_xdg_photo_dir.patch: Patch by Andrew Higginson to set the default import target to
# XDG pictures dir/Photos (as translated). This only affects the first run, existing users
# will see no change
-- f-spot-0.6.0.0.orig/debian/patches/ubuntu_xdg_photo_dir.patch
++ f-spot-0.6.0.0/debian/patches/ubuntu_xdg_photo_dir.patch
@ -0,0 +1,16 @@
Index: f-spot.git/src/Preferences.cs
===================================================================
--- f-spot.git.orig/src/Preferences.cs	2009-10-29 14:18:28.922756627 +0000
+++ f-spot.git/src/Preferences.cs	2009-10-29 14:19:10.045756727 +0000
@@ -146,7 +146,14 @@
 			case SCREENSAVER_TAG:
 				return 1;
 			case STORAGE_PATH:
-				return System.IO.Path.Combine (FSpot.Global.HomeDirectory, Catalog.GetString("Photos"));
+                String default_storage_path = System.IO.Path.Combine (
+                    Environment.GetFolderPath (Environment.SpecialFolder.MyPictures),
+                    Catalog.GetString ("Photos")
+                );
+				if (!System.IO.Directory.Exists (default_storage_path)) {
+					System.IO.Directory.CreateDirectory (default_storage_path);
+				}
+				return default_storage_path;
 			case EXPORT_EMAIL_SIZE:
 				return 3;	// medium size 640px
 			case EXPORT_EMAIL_ROTATE:
